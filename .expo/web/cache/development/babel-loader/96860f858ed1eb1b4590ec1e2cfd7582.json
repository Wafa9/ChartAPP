{"ast":null,"code":"import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport styleConstructor, { HOURS_SIDEBAR_WIDTH } from \"./style\";\nimport populateEvents, { HOUR_BLOCK_HEIGHT } from \"./Packer\";\nimport TimelineHours from \"./TimelineHours\";\nimport EventBlock from \"./EventBlock\";\nimport NowIndicator from \"./NowIndicator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function Timeline(props) {\n  var _props$format24h = props.format24h,\n      format24h = _props$format24h === void 0 ? true : _props$format24h,\n      _props$start = props.start,\n      start = _props$start === void 0 ? 0 : _props$start,\n      _props$end = props.end,\n      end = _props$end === void 0 ? 24 : _props$end,\n      date = props.date,\n      _props$events = props.events,\n      events = _props$events === void 0 ? [] : _props$events,\n      onEventPress = props.onEventPress,\n      onBackgroundLongPress = props.onBackgroundLongPress,\n      onBackgroundLongPressOut = props.onBackgroundLongPressOut,\n      renderEvent = props.renderEvent,\n      theme = props.theme,\n      scrollToFirst = props.scrollToFirst,\n      showNowIndicator = props.showNowIndicator,\n      eventTapped = props.eventTapped;\n  var scrollView = useRef();\n  var calendarHeight = useRef((end - start) * HOUR_BLOCK_HEIGHT);\n  var styles = useRef(styleConstructor(theme || props.styles, calendarHeight.current));\n  var packedEvents = useMemo(function () {\n    var width = dimensionWidth - HOURS_SIDEBAR_WIDTH;\n    return populateEvents(events, width, start);\n  }, [events, start]);\n  useEffect(function () {\n    if (scrollToFirst) {\n      var _min;\n\n      var firstTop = (_min = min(map(packedEvents, 'top'))) != null ? _min : 0;\n      var initPosition = firstTop - calendarHeight.current / (end - start);\n      var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n\n      if (verifiedInitPosition) {\n        setTimeout(function () {\n          var _scrollView$current;\n\n          scrollView == null ? void 0 : (_scrollView$current = scrollView.current) == null ? void 0 : _scrollView$current.scrollTo({\n            y: verifiedInitPosition,\n            animated: true\n          });\n        }, 0);\n      }\n    }\n  }, []);\n\n  var _onEventPress = useCallback(function (eventIndex) {\n    var event = events[eventIndex];\n\n    if (eventTapped) {\n      eventTapped(event);\n    } else {\n      onEventPress == null ? void 0 : onEventPress(event);\n    }\n  }, [events, onEventPress, eventTapped]);\n\n  var renderEvents = function renderEvents() {\n    var events = packedEvents.map(function (event, i) {\n      return _jsx(EventBlock, {\n        index: i,\n        event: event,\n        styles: styles.current,\n        format24h: format24h,\n        onPress: _onEventPress,\n        renderEvent: renderEvent\n      }, i);\n    });\n    return _jsx(View, {\n      children: _jsx(View, {\n        style: {\n          marginLeft: HOURS_SIDEBAR_WIDTH\n        },\n        children: events\n      })\n    });\n  };\n\n  return _jsxs(ScrollView, {\n    ref: scrollView,\n    contentContainerStyle: [styles.current.contentStyle, {\n      width: dimensionWidth\n    }],\n    children: [_jsx(TimelineHours, {\n      start: start,\n      end: end,\n      date: date,\n      format24h: format24h,\n      styles: styles.current,\n      onBackgroundLongPress: onBackgroundLongPress,\n      onBackgroundLongPressOut: onBackgroundLongPressOut\n    }), renderEvents(), showNowIndicator && _jsx(NowIndicator, {\n      styles: styles.current\n    })]\n  });\n};\n\nexport default Timeline;","map":{"version":3,"sources":["/home/lamaaldohayan/Desktop/project/financeApp/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["React","useCallback","useEffect","useMemo","useRef","min","map","styleConstructor","HOURS_SIDEBAR_WIDTH","populateEvents","HOUR_BLOCK_HEIGHT","TimelineHours","EventBlock","NowIndicator","Dimensions","get","dimensionWidth","width","Timeline","props","format24h","start","end","date","events","onEventPress","onBackgroundLongPress","onBackgroundLongPressOut","renderEvent","theme","scrollToFirst","showNowIndicator","eventTapped","scrollView","calendarHeight","styles","current","packedEvents","firstTop","initPosition","verifiedInitPosition","setTimeout","scrollTo","y","animated","_onEventPress","eventIndex","event","renderEvents","i","marginLeft","contentStyle"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { View, Dimensions, ScrollView } from 'react-native';\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport styleConstructor, { HOURS_SIDEBAR_WIDTH } from './style';\nimport populateEvents, { HOUR_BLOCK_HEIGHT } from './Packer';\nimport TimelineHours from './TimelineHours';\nimport EventBlock from './EventBlock';\nimport NowIndicator from './NowIndicator';\nconst { width: dimensionWidth } = Dimensions.get('window');\nconst Timeline = (props) => {\n    const { format24h = true, start = 0, end = 24, date, events = [], onEventPress, onBackgroundLongPress, onBackgroundLongPressOut, renderEvent, theme, scrollToFirst, showNowIndicator, eventTapped } = props;\n    const scrollView = useRef();\n    const calendarHeight = useRef((end - start) * HOUR_BLOCK_HEIGHT);\n    const styles = useRef(styleConstructor(theme || props.styles, calendarHeight.current));\n    const packedEvents = useMemo(() => {\n        const width = dimensionWidth - HOURS_SIDEBAR_WIDTH;\n        return populateEvents(events, width, start);\n    }, [events, start]);\n    useEffect(() => {\n        if (scrollToFirst) {\n            const firstTop = min(map(packedEvents, 'top')) ?? 0;\n            const initPosition = firstTop - calendarHeight.current / (end - start);\n            const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n            if (verifiedInitPosition) {\n                setTimeout(() => {\n                    scrollView?.current?.scrollTo({\n                        y: verifiedInitPosition,\n                        animated: true\n                    });\n                }, 0);\n            }\n        }\n    }, []);\n    const _onEventPress = useCallback((eventIndex) => {\n        const event = events[eventIndex];\n        if (eventTapped) {\n            //TODO: remove after deprecation\n            eventTapped(event);\n        }\n        else {\n            onEventPress?.(event);\n        }\n    }, [events, onEventPress, eventTapped]);\n    const renderEvents = () => {\n        const events = packedEvents.map((event, i) => {\n            return (<EventBlock key={i} index={i} event={event} styles={styles.current} format24h={format24h} onPress={_onEventPress} renderEvent={renderEvent}/>);\n        });\n        return (<View>\n        <View style={{ marginLeft: HOURS_SIDEBAR_WIDTH }}>{events}</View>\n      </View>);\n    };\n    return (\n    // @ts-expect-error\n    <ScrollView ref={scrollView} contentContainerStyle={[styles.current.contentStyle, { width: dimensionWidth }]}>\n      <TimelineHours start={start} end={end} date={date} format24h={format24h} styles={styles.current} onBackgroundLongPress={onBackgroundLongPress} onBackgroundLongPressOut={onBackgroundLongPressOut}/>\n      {renderEvents()}\n      {showNowIndicator && <NowIndicator styles={styles.current}/>}\n    </ScrollView>);\n};\nexport default Timeline;\n"]},"metadata":{},"sourceType":"module"}